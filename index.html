<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Country Data</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <style>
        .card-container {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
        }

        #list {
            list-style-type: none;
            padding: 0;
            cursor: pointer;
        }

        .card {
            max-width: 375px;
            margin: 10px; /* Adjust margin as needed */
        }
    </style>
</head>

<body>
<div class="card-container">
    <div class="card mb-3">
        <label class="form-label" style="text-align: center;">Select a country to see its data:</label>
        <input type="search" id="datalist" placeholder="Search Country">
        <ul id="list"></ul>
    </div>

    <div class="card mb-3"
         style="max-width: 375px; border-radius: 5px; box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2); display: inline-block; vertical-align: top;">
        <div class="card-body">
            <img id="flagImage" src="https://www.fon.bg.ac.rs/eng/downloads/sites/2/2018/03/Fon-cover-1024x483.jpg"
                 class="img-fluid rounded-start" alt="Flag" width="375" height="150">
            <h4 class="card-countri" style="text-align: center;" id="country">Country: </h4>
            <div style="margin-left: 10%;">
                <p class="card-capital" id="capital">Capital: </p>
                <p class="card-language" id="language">Language: </p>
            </div>
            <div style="margin-left: 10%;">
                <p class="card-population" id="population">Population: </p>
                <p class="card-currency" id="currency">Currency: </p>
            </div>
        </div>
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        let dataList = document.getElementById("datalist");
        let list = document.getElementById("list");
        let flagImage = document.getElementById("flagImage");
        let currencyImage = document.getElementById("currencyImage");
        let countries = [];

        // Send the GET request to API and create an array with the names of the countries
        fetch("https://restcountries.com/v3.1/all")
            .then(res => res.json())
            .then(data => {
                countries = data.map(country => country.name.common).sort();
            })
            .catch(err => {
                console.error(err);
            });

        // Create an event for typing and searching for the country
        dataList.addEventListener("input", function () {
            let value = this.value;
            list.innerHTML = "";
            countries
                .filter(country => country.toLowerCase().includes(value.toLowerCase()))
                .forEach(country => {
                    let li = document.createElement("li");
                    li.textContent = country;
                    list.appendChild(li);
                });
        });

        list.addEventListener("click", function (event) {
            let target = event.target;
            if (target.tagName === "LI") {
                let countrySelected = target.textContent;
                dataList.value = countrySelected;
                searchDateCountry(countrySelected);
            }
        });

        // Send the GET request to the API of the selected country and display the data in the HTML page
        function searchDateCountry(countrySelected) {
            fetch("https://restcountries.com/v3.1/name/" + countrySelected)
                .then(res => res.json())
                .then(data => {
                    flagImage.setAttribute("src", data[0].flags.png);
                    // currencyImage.setAttribute("src", Object.keys(data[0].currencies).symbol);
                    document.getElementById("country").textContent = "Country: " + countrySelected;
                    document.getElementById("capital").textContent = "Capital: " + data[0].capital[0];
                    document.getElementById("language").textContent = "Language: " + Object.values(data[0].languages).join(", ");
                    document.getElementById("population").textContent = "Population: " + data[0].population;
                    document.getElementById("currency").textContent = "Currency: " + Object.keys(data[0].currencies).join(", ");
                })
                .catch(err => {
                    console.error(err);
                });
        }
    });
</script>
</body>

</html>
